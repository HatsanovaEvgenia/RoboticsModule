# Обратная задача кинематики. Кинематическая декомпозиция. Решение ОЗК по положению. Решение ОЗК по ориентации.

## Обратная задача кинематики.

Обратная задача кинематики (ОЗК) — задача поиска набора подходящих конфигураций звеньев для перемещения схвата в желаемое положение. В отличие от прямой задачи кинематики, которая вычисляет положение и ориентацию схвата по заданным углам суставов, обратная задача решает противоположную задачу: определение углов суставов для достижения желаемого положения и ориентации схвата.

Эта задача является более сложной, чем ПЗК, поскольку может вести к неопределенности решения, т.е. одному и тому же набору положению рабочего органа в пространстве могут соответствовать разные конфигурации робота. Кроме того, решение ОЗК существенно зависит от конструкции манипулятора, что исключает возможность разработки единого способа решения ОЗК в общем случае для всех типов роботов.<sup>2</sup>

Существует множество методов для решения обратной задачи кинематики, их выбор зависит от конкретной ситуации. Мы воспользуемся самым простым методом, но если у Вас возникнет желание разобраться в других методах, изучите источники из библиографического списка.

Для моделирования будем задавать только положение схвата, не учитывая его ориентацию. Конечно, в реальной симуляции это нам не подойдет: в большинстве случаев ориентация схвата или рабочего органа крайне важна. Решение задачи о положении отдельно от задачи ориентации называется **кинематической декомпозицией**.

Напомним, как выглядит наш робот манипулятор: ![](/Lessons/img/lecture_2/11.jpg).

В данном случае, все обобщенные координаты $q_1$, $q_2$ и $q_3$ определяют положение схвата. Это не всегда так для манипуляторов разной конфигурации.

$$
p^0_3(q) =
\begin{bmatrix}
x^0_3(q) \\
y^0_3(q) \\
z^0_3(q)
\end{bmatrix}
$$

$$ = $$

$$
\begin{bmatrix}
( l_2 * cos q_2 + l_3 * cos(q_2 + q_3)) * cos q_1 \\
( l_2 * cos q_2 + l_3 * cos(q_2 + q_3)) * sin q_1 \\
l_1 + l_2 * sin q_2 + l_3 * sin(q_2 + q_3)
\end{bmatrix}
$$

Получаем:

$$
x = (l_2 * cos q_2 + l_3 * cos(q_2 + q_3)) * cos q_1 \\
y =  (l_2 * cos q_2 + l_3 * cos(q_2 + q_3)) * sin q_1 \\
z = l_1 + l_2 * sin q_2 + l_3 * sin(q_2 + q_3)


$$

Делим второе уравнение на первое:

$$
\frac{y}{x} = \frac{(l_2 * cos q_2 + l_3 * cos(q_2 + q_3)) * sin q_1}{(l_2 * cos q_2 + l_3 * cos(q_2 + q_3)) * cos q_1} = \frac{sin q_1}{cos q_1} = tg (q_1)
$$

Получаем, что $q_1 = arctg(\frac{y}{x})$, но если мы так все и оставим, то у нас будут проблемы, в разных частных случаях, например, если $x = 0$. Можно дополнить решение таким образом:

$$
q_1 =
\begin{cases}
\arctan\!\left(\dfrac{y}{x}\right), & x>0,\\[6pt]
\arctan\!\left(\dfrac{y}{x}\right) + \pi, & x<0,\ y\ge 0,\\[6pt]
\arctan\!\left(\dfrac{y}{x}\right) - \pi, & x<0,\ y<0,\\[6pt]
+\dfrac{\pi}{2}, & x=0,\ y>0,\\[6pt]
-\dfrac{\pi}{2}, & x=0,\ y<0.
\end{cases}
$$

Но уже есть функция, которая дополняет решение таким же образом <sup>[8]</sup>:
$$q_1=\operatorname{atan2}(y,x)$$

В любом случае у нас есть неопределенность, если $ x = y = 0$, обобщенная координата $q_1$ при этом имеет бесконечное множество значений<sup>[2]</sup>.

Обратим внимание на кинематическую схему манипулятора:

![](/Lessons/img/practice_3/1.jpg).

Видно, по координате z, есть две составляющие: $z = s + l_1$, где s зависит от $q_2$ и $q_3$:

![](/Lessons/img/practice_3/2.jpg).

Из уравнения выше получаем, что:

$$s = l_2 * sin q_2 + l_3 * sin(q_2 + q_3)$$

Еще введем переменную $\rho = \sqrt{x^2 + y^2}$

$$\rho = \sqrt{{((l_2 * cos q_2 + l_3 * cos(q_2 + q_3)) * cos q_1)}^2 + {((l_2 * cos q_2 + l_3 * cos(q_2 + q_3)) * sin q_1)}^2} = $$

$$=\sqrt{{(l_2 * cos q_2 + l_3 * cos(q_2 + q_3))}^2 * {(cos q_1)}^2 + {(l_2 * cos q_2 + l_3 * cos(q_2 + q_3))}^2 * {(sin q_1)}^2} = $$

$$=\sqrt{{(l_2 * cos q_2 + l_3 * cos(q_2 + q_3))}^2 * ({(cos q_1)}^2 + {(sin q_1)}^2)} = $$

$$=\sqrt{{(l_2 * cos q_2 + l_3 * cos(q_2 + q_3))}^2 * 1} = $$
$$=\sqrt{{(l_2*cos q_2 + l_3*cos(q_2 + q_3))}^2} = $$
$$=l_2 * cos q_2 + l_3*cos(q_2 + q_3)$$

Посмотрим внимательно на получившиеся, в следствие замены переменных, уравнения:
$$s = l_2 * sin q_2 + l_3 * sin(q_2 + q_3)$$
$$\rho=l_2 * cos q_2 + l_3 * cos(q_2 + q_3)$$

Заметим, что они равны с точностью до тригонометрических функций.

## Библиографический список.

[1]: https://mnk.mpei.ru/PDF/NAUKA/Kin2000.pdf

<sup>[1]</sup> Корецкий А.В., Осадченко Н.В.
Компьютерное моделирование кинематики манипуляционных
роботов. – М.: Издательство МЭИ, 2000. – 48 с.

[2]: https://books.ifmo.ru/file/pdf/2094.pdf

<sup>[2]</sup> Борисов О.И., Громов В.С., Пыркин А.А., Методы управления робототехническими приложениями. Учебное пособие. — СПб.: Университет
ИТМО, 2016. — 108 с.

[3]: https://synergy-network.ru/wp-content/uploads/2018/01/rtsomsk.pdf?ysclid=megz6kwd1s987581052

<sup>[3]</sup> В. Г. Хомченко, Робототехнические системы: Учебное пособие, Омск 2016 г. – 195 стр.

[4]: https://www.bsuir.by/m/12_113415_1_70397.pdf

<sup>[4]</sup> А.С. Климчик Р.И. Гомолицкий Ф.В. Фурман К.И. Сёмкин  
Разработка управляющих программ промышленных роботов. Курс лекций

[5]: http://dx.doi.org/10.18698/2541-8009-2022-12-846

<sup>[5]</sup> Коровин О.С. Обзор методов решения обратной задачи кинематики для манипулятора с избыточностью. Политехнический молодежный журнал, 2022, № 12(77).

[6]: https://keldysh.ru/papers/2018/prep2018_81.pdf?ysclid=mekfech73e137782129

<sup>[6]</sup> Данилов А.В., Кропотов А.Н., Трифонов О.В.
Общий подход к решению обратной задачи кинематики для манипулятора последовательной структуры с помощью конечного поворота и смещения

[7]: https://moitvivt.ru/ru/journal/pdf?id=1101

<sup>[7]</sup> Анализ методов решения обратной задачи кинематики модульных реконфигурируемых систем

[8]: https://numpy.org/doc/2.2/reference/generated/numpy.atan2.html

<sup>[8]</sup> numpy.atan2

[9]:

<sup>[9]</sup>

[10]:

<sup>[10]</sup>
